(function(t){function e(e){for(var o,s,i=e[0],c=e[1],r=e[2],l=0,_=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&_.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(_.length)_.shift()();return u.push.apply(u,r||[]),n()}function n(){for(var t,e=0;e<u.length;e++){for(var n=u[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(u.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={app:0},u=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/tyazhelovato/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var r=0;r<i.length;r++)e(i[r]);var d=c;u.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),a=n.n(o);a.a},2383:function(t,e,n){"use strict";var o=n("b70e"),a=n.n(o);a.a},"23f1":function(t,e,n){},"2b27":function(t,e,n){"use strict";var o=n("53d7"),a=n.n(o);a.a},"4a42":function(t,e,n){},"53d7":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o,a=n("2b0e"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("button",{on:{click:t.save}},[t._v("save")]),n("button",{on:{click:t.load}},[t._v("load")]),t.showSettings?n("SettingsScreen",{on:{"close-settings":t.closeSettings}}):t.showModal?n("MoneyLeftModal"):n("div",[n("StatusSection",{on:{"open-settings":t.openSettings}}),n("CanSpendToday"),n("div",{staticClass:"spendinginput-line"},[n("SpendingInput"),n("RevertButton",{attrs:{hasHistory:t.hasHistory,moneyToReturn:t.lastSpending}})],1),n("div",{staticClass:"editorbuttons"},[n("Numpad"),n("div",{staticClass:"editorbuttons__secondary"},[n("DeleteButton"),n("SubmitButton")],1)],1)],1)],1)},s=[],i=n("5530"),c=n("2f62"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"statuspane"},[n("div",{staticClass:"statuspane__status"},[t._v(t._s(t.moneyLeft)+" на "+t._s(t.daysLeft))]),n("button",{staticClass:"statuspane__settings",on:{click:t.openSettings}})])},d=[],l={computed:Object(i["a"])({},Object(c["d"])(["daysLeft","moneyLeft"])),methods:{openSettings:function(){this.$emit("open-settings")}}},_=l,p=(n("2383"),n("2877")),f=Object(p["a"])(_,r,d,!1,null,null,null),m=f.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"canspendtoday"},[n("div",{staticClass:"canspendtoday__moneyblock"},[t._v(t._s(t.toSpendWithInput))]),n("div",{staticClass:"canspendtoday__textblock"},[t._v("На сегодня")]),t.moreThanTodayLeft?n("div",[t._v(" Трата приведет к пересчету суточного лимита до "+t._s(t.getDailyWithInput)+" ")]):t._e()])},y=[],E={computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({toSpendWithInput:function(){return this.todayLeft-this.getSpentInput>0?this.todayLeft-this.getSpentInput:0}},Object(c["d"])(["todayLeft"])),Object(c["b"])(["getSpentInput","getDailyWithInput"])),{},{moreThanTodayLeft:function(){return this.todayLeft<this.getSpentInput}})},O=E,h=(n("a0a9"),Object(p["a"])(O,b,y,!1,null,null,null)),v=h.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spendings"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.input,expression:"input",modifiers:{number:!0}}],staticClass:"spendings__input",attrs:{type:"text",inputmode:"decimal",placeholder:"0"},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newSpending(e)},input:function(e){e.target.composing||(t.input=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])},D=[],S=n("6e87"),T={computed:{input:{get:function(){return this.$store.state.spentInput},set:function(t){this.$store.commit(S["UPDATED_INPUT"],t)}}}},N=T,g=(n("2b27"),Object(p["a"])(N,L,D,!1,null,null,null)),M=g.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings"},[n("label",[n("p",[t._v("Сумма")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sum,expression:"sum",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.sum},on:{input:function(e){e.target.composing||(t.sum=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._m(0),n("button",{on:{click:t.setSum}},[t._v("Сохранить")]),n("button",{on:{click:t.cancel}},[t._v("Отменить")])])},A=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",[n("p",[t._v("Срок")]),n("input",{attrs:{type:"date"}})])}],j={methods:{cancel:function(){this.$emit("close-settings")},setSum:function(){this.$store.commit(S["NEW_MONTHLY_LIMIT"],this.sum)}},data:function(){return{sum:0}},created:function(){this.sum=this.$store.state.paycheckSum}},P=j,w=Object(p["a"])(P,I,A,!1,null,null,null),C=w.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal--money-left"},[n("div",[t._v(t._s(this.todayLeft+this.dailyBudget*(this.getTodayDate-this.todayDate)))]),n("button",{on:{click:t.spendTodayHandler}},[t._v("Spend Today")]),n("button",{on:{click:t.spreadOverHandler}},[t._v("Spread evenly")])])},Y=[],k={methods:Object(i["a"])(Object(i["a"])({},Object(c["c"])({spendToday:S["SPEND_TODAY"],spreadOver:S["SPREAD_ON_ALL"],removeModal:S["REMOVE_MODAL_MONEYLEFT"]})),{},{spendTodayHandler:function(){this.spendToday(),this.removeModal()},spreadOverHandler:function(){this.spreadOver(),this.removeModal()}}),computed:Object(i["a"])(Object(i["a"])({},Object(c["b"])(["getTodayDate"])),Object(c["d"])(["todayDate","todayLeft","dailyBudget"]))},U=k,B=Object(p["a"])(U,R,Y,!1,null,null,null),$=B.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasHistory?n("button",{staticClass:"revert-button",on:{click:t.revert}},[t._v("Вернуть "+t._s(t.moneyToReturn))]):t._e()},x=[],H=(n("a9e3"),{methods:{revert:function(){this.$store.commit(S["REVERT_LAST_SPENDING"])}},props:{hasHistory:{type:Boolean,default:!1,required:!0},moneyToReturn:Number}}),F=H,G=(n("f634"),Object(p["a"])(F,W,x,!1,null,null,null)),V=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"numpad"},[n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(1)}}},[t._v("1")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(2)}}},[t._v("2")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(3)}}},[t._v("3")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(4)}}},[t._v("4")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(5)}}},[t._v("5")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(6)}}},[t._v("6")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(7)}}},[t._v("7")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(8)}}},[t._v("8")]),n("button",{staticClass:"numpad__button numpad__button--num",on:{click:function(e){return t.sendNewNumber(9)}}},[t._v("9")]),n("button",{staticClass:"numpad__button numpad__button--num numpad__button--nil",on:{click:function(e){return t.sendNewNumber(0)}}},[t._v("0")]),n("button",{staticClass:"numpad__button numpad__button--coma",on:{click:function(e){return t.sendNewNumber(".")}}},[t._v(".")])])},J=[],q={methods:Object(c["c"])({sendNewNumber:S["NUMBER_CLICKED"]})},z=q,Q=(n("5eb6"),Object(p["a"])(z,K,J,!1,null,null,null)),X=Q.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"editorbuttons__secondary__button editorbuttons__secondary__button--delete",on:{click:function(e){return t.del()}}},[t._v("del")])},tt=[],et={methods:Object(c["c"])({del:S["REMOVE_LAST_NUM"]})},nt=et,ot=(n("b070"),Object(p["a"])(nt,Z,tt,!1,null,null,null)),at=ot.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"editorbuttons__secondary__button editorbuttons__secondary__button--submit",attrs:{"aria-label":"submit"},on:{click:t.newSpending}})},st=[],it={methods:{newSpending:function(){""!==this.$store.state.spentInput&&(this.$store.commit(S["NEW_SPENDING"],Number(this.$store.state.spentInput)),this.$store.commit(S["UPDATE_DAILY_BUDGET_FROM_TOMORROW"]),this.input="")}}},ct=it,rt=(n("de32"),Object(p["a"])(ct,ut,st,!1,null,null,null)),dt=rt.exports,lt={name:"App",data:function(){return{showSettings:!1}},components:{StatusSection:m,CanSpendToday:v,SpendingInput:M,SettingsScreen:C,MoneyLeftModal:$,RevertButton:V,Numpad:X,SubmitButton:dt,DeleteButton:at},methods:{openSettings:function(){this.showSettings=!0},closeSettings:function(){this.showSettings=!1},save:function(){localStorage.setItem("state",JSON.stringify(this.$store.state))},load:function(){var t=localStorage.getItem("state");if(t){var e=JSON.parse(t);this.$store.replaceState(e)}}},computed:Object(i["a"])(Object(i["a"])({},Object(c["d"])({history:"beforeLastSpending",showModal:"showModal"})),{},{hasHistory:function(){return!!this.history},lastSpending:function(){return this.hasHistory?this.history.lastSpending:0}}),mounted:function(){this.$store.dispatch("INITIALISE")}},_t=lt,pt=(n("034f"),Object(p["a"])(_t,u,s,!1,null,null,null)),ft=pt.exports,mt=(n("fb6a"),n("ade3"));a["a"].use(c["a"]);var bt=new c["a"].Store({state:{paycheckDay:5,paycheckSum:8200,moneyLeft:8200,spentInput:"",showModal:!1,todayLeft:0,todayDate:void 0,daysLeft:30,beforeLastSpending:void 0,dailyBudget:void 0},mutations:(o={},Object(mt["a"])(o,S["NEW_SPENDING"],(function(t,e){t.beforeLastSpending={moneyLeft:t.moneyLeft,todayLeft:t.todayLeft,dailyBudget:t.dailyBudget,lastSpending:e},e<=t.todayLeft?(t.moneyLeft-=e,t.todayLeft-=e):(t.todayLeft=0,t.moneyLeft-=e)})),Object(mt["a"])(o,S["NEW_MONTHLY_LIMIT"],(function(t,e){t.paycheckSum=e,t.moneyLeft=e})),Object(mt["a"])(o,S["NEW_PAYCHECK_DAY"],(function(t,e){t.paycheckDay=e})),Object(mt["a"])(o,S["UPDATED_INPUT"],(function(t,e){t.spentInput=e})),Object(mt["a"])(o,S["SHOW_MODAL_MONEYLEFT"],(function(t){t.showModal=!0})),Object(mt["a"])(o,S["REMOVE_MODAL_MONEYLEFT"],(function(t){t.showModal=!1})),Object(mt["a"])(o,S["SPEND_TODAY"],(function(t){t.todayLeft=Math.floor(t.todayLeft+t.dailyBudget*(t.today-(new Date).getDate())/t.daysLeft)})),Object(mt["a"])(o,S["SPREAD_ON_ALL"],(function(t){t.todayLeft=Math.floor(t.moneyLeft/t.daysLeft)})),Object(mt["a"])(o,S["SET_TODAY"],(function(t){t.todayDate=(new Date).getDate()})),Object(mt["a"])(o,S["SET_DAYS_LEFT"],(function(t,e){t.daysLeft=e})),Object(mt["a"])(o,S["REVERT_LAST_SPENDING"],(function(t){t.todayLeft=t.beforeLastSpending.todayLeft,t.moneyLeft=t.beforeLastSpending.moneyLeft,t.dailyBudget=t.beforeLastSpending.dailyBudget,t.beforeLastSpending=void 0})),Object(mt["a"])(o,S["UPDATE_DAILY_BUDGET"],(function(t){t.dailyBudget=Math.floor((t.moneyLeft-t.todayLeft)/t.daysLeft)})),Object(mt["a"])(o,S["UPDATE_DAILY_BUDGET_FROM_TOMORROW"],(function(t){t.dailyBudget=Math.floor((t.moneyLeft-t.todayLeft)/(t.daysLeft-1))})),Object(mt["a"])(o,S["NUMBER_CLICKED"],(function(t,e){t.spentInput+=String(e)})),Object(mt["a"])(o,S["REMOVE_LAST_NUM"],(function(t){t.spentInput.length>0&&(t.spentInput=t.spentInput.slice(0,-1))})),o),actions:{INITIALISE:function(t){var e,n=new Date;e=n.getDate()>t.state.paycheckDay?new Date(n.getFullYear(),n.getMonth()+1,t.state.paycheckDay):new Date(n.getFullYear(),n.getMonth(),t.state.paycheckDay);var o=Math.floor((e-n)/864e5)+1;t.commit(S["SET_DAYS_LEFT"],o),t.state.todayDate&&(new Date).getDate()!==t.state.todayDate?t.commit(S["SHOW_MODAL_MONEYLEFT"]):(t.commit(S["UPDATE_DAILY_BUDGET"]),t.commit(S["SPREAD_ON_ALL"])),t.commit(S["SET_TODAY"])}},modules:{},getters:{getSpentInput:function(t){return Number(t.spentInput)},getTodayDate:function(){return(new Date).getDate()},getDailyWithInput:function(t){return(t.moneyLeft-t.dailyBudget-(Number(t.spentInput)-t.todayLeft))/(t.daysLeft-1)}}});a["a"].config.productionTip=!1,new a["a"]({store:bt,render:function(t){return t(ft)}}).$mount("#app")},"5eb6":function(t,e,n){"use strict";var o=n("cc33"),a=n.n(o);a.a},"6e87":function(t,e){t.exports={NEW_SPENDING:"NEW_SPENDING",NEW_MONTHLY_LIMIT:"NEW_MONTHLY_LIMIT",NEW_PAYCHECK_DAY:"NEW_PAYCHECK_DAY",UPDATED_INPUT:"UPDATED_INPUT",INPUT_SUBMITED:"INPUT_SUBMITED",SHOW_MODAL_MONEYLEFT:"SHOW_MODAL_MONEYLEFT",REMOVE_MODAL_MONEYLEFT:"REMOVE_MODAL_MONEYLEFT",SPEND_TODAY:"SPEND_TODAY",SPREAD_ON_ALL:"SPREAD_ON_ALL",SET_TODAY:"SET_TODAY",SET_DAYS_LEFT:"SET_DAYS_LEFT",REVERT_LAST_SPENDING:"REVERT_LAST_SPENDING",UPDATE_DAILY_BUDGET:"UPDATE_DAILY_BUDGET",UPDATE_DAILY_BUDGET_FROM_TOMORROW:"UPDATE_DAILY_BUDGET_FROM_TOMORROW",NUMBER_CLICKED:"NUMBER_CLICKED",REMOVE_LAST_NUM:"REMOVE_LAST_NUM"}},"85ec":function(t,e,n){},a0a9:function(t,e,n){"use strict";var o=n("bd76"),a=n.n(o);a.a},b070:function(t,e,n){"use strict";var o=n("bf7f"),a=n.n(o);a.a},b70e:function(t,e,n){},bd76:function(t,e,n){},bf7f:function(t,e,n){},cc33:function(t,e,n){},de32:function(t,e,n){"use strict";var o=n("23f1"),a=n.n(o);a.a},f634:function(t,e,n){"use strict";var o=n("4a42"),a=n.n(o);a.a}});
//# sourceMappingURL=app.71bfecc4.js.map